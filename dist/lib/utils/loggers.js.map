{"version":3,"file":"loggers.js","sourceRoot":"","sources":["../../../src/lib/utils/loggers.ts"],"names":[],"mappings":"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","sourcesContent":["import * as ts from 'typescript';\r\nimport * as Util from 'util';\r\n\r\n/**\r\n * List of known log levels. Used to specify the urgency of a log message.\r\n */\r\nexport enum LogLevel {\r\n    Verbose,\r\n    Info,\r\n    Warn,\r\n    Error,\r\n    Success\r\n}\r\n\r\n/**\r\n * A logger that will not produce any output.\r\n *\r\n * This logger also serves as the ase calls of other loggers as it implements\r\n * all the required utility functions.\r\n */\r\nexport class Logger {\r\n    /**\r\n     * How many error messages have been logged?\r\n     */\r\n    errorCount = 0;\r\n\r\n    /**\r\n     * Has an error been raised through the log method?\r\n     */\r\n    public hasErrors(): boolean {\r\n        return this.errorCount > 0;\r\n    }\r\n\r\n    /**\r\n     * Reset the error counter.\r\n     */\r\n    public resetErrors() {\r\n        this.errorCount = 0;\r\n    }\r\n\r\n    /**\r\n     * Log the given message.\r\n     *\r\n     * @param text  The message that should be logged.\r\n     * @param args  The arguments that should be printed into the given message.\r\n     */\r\n    public write(text: string, ...args: string[]) {\r\n        this.log(Util.format.apply(this, arguments), LogLevel.Info);\r\n    }\r\n\r\n    /**\r\n     * Log the given message with a trailing whitespace.\r\n     *\r\n     * @param text  The message that should be logged.\r\n     * @param args  The arguments that should be printed into the given message.\r\n     */\r\n    public writeln(text: string, ...args: string[]) {\r\n        this.log(Util.format.apply(this, arguments), LogLevel.Info, true);\r\n    }\r\n\r\n    /**\r\n     * Log the given success message.\r\n     *\r\n     * @param text  The message that should be logged.\r\n     * @param args  The arguments that should be printed into the given message.\r\n     */\r\n    public success(text: string, ...args: string[]) {\r\n        this.log(Util.format.apply(this, arguments), LogLevel.Success);\r\n    }\r\n\r\n    /**\r\n     * Log the given verbose message.\r\n     *\r\n     * @param text  The message that should be logged.\r\n     * @param args  The arguments that should be printed into the given message.\r\n     */\r\n    public verbose(text: string, ...args: string[]) {\r\n        this.log(Util.format.apply(this, arguments), LogLevel.Verbose);\r\n    }\r\n\r\n    /**\r\n     * Log the given warning.\r\n     *\r\n     * @param text  The warning that should be logged.\r\n     * @param args  The arguments that should be printed into the given warning.\r\n     */\r\n    public warn(text: string, ...args: string[]) {\r\n        this.log(Util.format.apply(this, arguments), LogLevel.Warn);\r\n    }\r\n\r\n    /**\r\n     * Log the given error.\r\n     *\r\n     * @param text  The error that should be logged.\r\n     * @param args  The arguments that should be printed into the given error.\r\n     */\r\n    public error(text: string, ...args: string[]) {\r\n        this.log(Util.format.apply(this, arguments), LogLevel.Error);\r\n    }\r\n\r\n    /**\r\n     * Print a log message.\r\n     *\r\n     * @param message  The message itself.\r\n     * @param level  The urgency of the log message.\r\n     * @param newLine  Should the logger print a trailing whitespace?\r\n     */\r\n    public log(message: string, level: LogLevel = LogLevel.Info, newLine?: boolean) {\r\n        if (level === LogLevel.Error) {\r\n            this.errorCount += 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Print the given TypeScript log messages.\r\n     *\r\n     * @param diagnostics  The TypeScript messages that should be logged.\r\n     */\r\n    public diagnostics(diagnostics: ReadonlyArray<ts.Diagnostic>) {\r\n        diagnostics.forEach((diagnostic) => {\r\n            this.diagnostic(diagnostic);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Print the given TypeScript log message.\r\n     *\r\n     * @param diagnostic  The TypeScript message that should be logged.\r\n     */\r\n    public diagnostic(diagnostic: ts.Diagnostic) {\r\n        let output: string;\r\n        if (diagnostic.file) {\r\n            output = diagnostic.file.fileName;\r\n            output += '(' + ts.getLineAndCharacterOfPosition(diagnostic.file, diagnostic.start).line + ')';\r\n            output += ts.sys.newLine + ' ' + ts.flattenDiagnosticMessageText(diagnostic.messageText, ts.sys.newLine);\r\n        } else {\r\n            output = diagnostic.messageText.toString();\r\n        }\r\n\r\n        switch (diagnostic.category) {\r\n            case ts.DiagnosticCategory.Error:\r\n                this.log(output, LogLevel.Error);\r\n                break;\r\n            case ts.DiagnosticCategory.Warning:\r\n                this.log(output, LogLevel.Warn);\r\n                break;\r\n            case ts.DiagnosticCategory.Message:\r\n                this.log(output, LogLevel.Info);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * A logger that outputs all messages to the console.\r\n */\r\nexport class ConsoleLogger extends Logger {\r\n    /**\r\n     * Print a log message.\r\n     *\r\n     * @param message  The message itself.\r\n     * @param level  The urgency of the log message.\r\n     * @param newLine  Should the logger print a trailing whitespace?\r\n     */\r\n    public log(message: string, level: LogLevel = LogLevel.Info, newLine?: boolean) {\r\n        if (level === LogLevel.Error) {\r\n            this.errorCount += 1;\r\n        }\r\n\r\n        let output = '';\r\n        if (level === LogLevel.Error) {\r\n            output += 'Error: ';\r\n        }\r\n        if (level === LogLevel.Warn) {\r\n            output += 'Warning: ';\r\n        }\r\n        output += message;\r\n\r\n        if (newLine || level === LogLevel.Success) {\r\n            ts.sys.write(ts.sys.newLine);\r\n        }\r\n        ts.sys.write(output + ts.sys.newLine);\r\n        if (level === LogLevel.Success) {\r\n            ts.sys.write(ts.sys.newLine);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * A logger that calls a callback function.\r\n */\r\nexport class CallbackLogger extends Logger {\r\n    /**\r\n     * This loggers callback function\r\n     */\r\n    callback: Function;\r\n\r\n    /**\r\n     * Create a new CallbackLogger instance.\r\n     *\r\n     * @param callback  The callback that should be used to log messages.\r\n     */\r\n    constructor(callback: Function) {\r\n        super();\r\n        this.callback = callback;\r\n    }\r\n\r\n    /**\r\n     * Print a log message.\r\n     *\r\n     * @param message  The message itself.\r\n     * @param level  The urgency of the log message.\r\n     * @param newLine  Should the logger print a trailing whitespace?\r\n     */\r\n    public log(message: string, level: LogLevel = LogLevel.Info, newLine?: boolean) {\r\n        if (level === LogLevel.Error) {\r\n            this.errorCount += 1;\r\n        }\r\n\r\n        this.callback(message, level, newLine);\r\n    }\r\n}\r\n"]}