{"version":3,"file":"LayoutPlugin.js","sourceRoot":"","sources":["../../../../src/lib/output/plugins/LayoutPlugin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,4CAA6D;AAC7D,oCAAsC;AAStC;IAAkC,gCAAiB;IAAnD;;IAiBA,CAAC;IAbG,iCAAU,GAAV;QACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,kBAAS,CAAC,GAAG,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACrE,CAAC;IAOO,wCAAiB,GAAzB,UAA0B,IAAe;QACrC,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC;QACvF,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAhBQ,YAAY;QADxB,sBAAS,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,CAAC;OACf,YAAY,CAiBxB;IAAD,mBAAC;CAAA,AAjBD,CAAkC,8BAAiB,GAiBlD;AAjBY,oCAAY","sourcesContent":["import { Component, RendererComponent } from '../components';\r\nimport { PageEvent } from '../events';\r\n\r\n/**\r\n * A plugin that wraps the generated output with a layout template.\r\n *\r\n * Currently only a default layout is supported. The layout must be stored\r\n * as ´layouts/default.hbs´ in the theme directory.\r\n */\r\n@Component({name: 'layout'})\r\nexport class LayoutPlugin extends RendererComponent {\r\n    /**\r\n     * Create a new LayoutPlugin instance.\r\n     */\r\n    initialize() {\r\n        this.listenTo(this.owner, PageEvent.END, this.onRendererEndPage);\r\n    }\r\n\r\n    /**\r\n     * Triggered after a document has been rendered, just before it is written to disc.\r\n     *\r\n     * @param page  An event object describing the current render operation.\r\n     */\r\n    private onRendererEndPage(page: PageEvent) {\r\n        const layout = this.owner.theme.resources.layouts.getResource('default').getTemplate();\r\n        page.contents = layout(page);\r\n    }\r\n}\r\n"]}